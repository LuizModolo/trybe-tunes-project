{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Button from'../components/Button';import Header from'../components/Header';import Input from'../components/Input';import Loading from'../components/Loading';import searchAlbumsAPI from'../services/searchAlbumsAPI';import'./search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);_this=_super.call(this);_this.handleChange=function(_ref){var target=_ref.target;var name=target.name;var value=target.type==='checkbox'?target.checked:target.value;_this.setState(_defineProperty({},name,value),_this.handleSearch);};_this.handleSearch=function(){var name=_this.state.name;var minCaracterLogin=1;if(name.length>minCaracterLogin){_this.setState({isSearchButtonDisabled:false});}else{_this.setState({isSearchButtonDisabled:true});}};_this.buttonSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var name;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();name=_this.state.name;_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var artistList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return searchAlbumsAPI(name);case 2:artistList=_context.sent;_this.setState({artists:artistList,loading:false,artNameState:name,name:''});case 4:case\"end\":return _context.stop();}}},_callee);})));case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={artists:[],name:'',isSearchButtonDisabled:true,loading:false,artNameState:''};return _this;}_createClass(Search,[{key:\"render\",value:function render(){var _this$state=this.state,isSearchButtonDisabled=_this$state.isSearchButtonDisabled,name=_this$state.name,loading=_this$state.loading,artists=_this$state.artists,artNameState=_this$state.artNameState;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-search\",children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"total-search\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-fields\",children:[/*#__PURE__*/_jsx(Input,{testeid:\"search-artist-input\",type:\"text\",name:\"name\",value:name,onChange:this.handleChange}),/*#__PURE__*/_jsx(Button,{testeidB:\"search-artist-button\",nameButton:\"Pesquisar\",isDisabled:isSearchButtonDisabled,ButtonClick:this.buttonSearch})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Resultado de \\xE1lbuns de:  \".concat(artNameState)}),/*#__PURE__*/_jsx(\"div\",{className:\"album-list\",children:!artists.length?/*#__PURE__*/_jsx(\"p\",{children:\"Nenhum \\xE1lbum foi encontrado\"}):artists.map(function(artist){return/*#__PURE__*/_jsx(\"div\",{className:\"album-cart\",children:/*#__PURE__*/_jsxs(Link,{className:\"link-cart\",\"data-testid\":\"link-to-album-\".concat(artist.collectionId),to:\"/album/\".concat(artist.collectionId),children:[/*#__PURE__*/_jsx(\"img\",{src:artist.artworkUrl100,alt:artist.artistName}),/*#__PURE__*/_jsx(\"h2\",{children:artist.collectionName}),/*#__PURE__*/_jsx(\"p\",{children:artist.artistName})]})},artist.collectionId);})})]})]})]});}}]);return Search;}(Component);export default Search;","map":{"version":3,"sources":["/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/Search.jsx"],"names":["React","Component","Link","Button","Header","Input","Loading","searchAlbumsAPI","Search","handleChange","target","name","value","type","checked","setState","handleSearch","state","minCaracterLogin","length","isSearchButtonDisabled","buttonSearch","event","preventDefault","loading","artistList","artists","artNameState","map","artist","collectionId","artworkUrl100","artistName","collectionName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from '../components/Button';\nimport Header from '../components/Header';\nimport Input from '../components/Input';\nimport Loading from '../components/Loading';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport './search.css';\n\nclass Search extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      artists: [],\n      name: '',\n      isSearchButtonDisabled: true,\n      loading: false,\n      artNameState: '',\n    };\n  }\n\n  handleChange = ({ target }) => {\n    const { name } = target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    this.setState({\n      [name]: value,\n    }, this.handleSearch);\n  };\n\n  handleSearch = () => {\n    const { name } = this.state;\n    const minCaracterLogin = 1;\n    if (name.length > minCaracterLogin) {\n      this.setState({ isSearchButtonDisabled: false });\n    } else {\n      this.setState({ isSearchButtonDisabled: true });\n    }\n  }\n\n  buttonSearch = async (event) => {\n    event.preventDefault();\n    const { name } = this.state;\n    this.setState(\n      { loading: true },\n      async () => {\n        const artistList = await searchAlbumsAPI(name);\n        this.setState({\n          artists: artistList,\n          loading: false,\n          artNameState: name,\n          name: '',\n        });\n      },\n    );\n  }\n\n  render() {\n    const { isSearchButtonDisabled, name, loading, artists, artNameState } = this.state;\n    return (\n      <div data-testid=\"page-search\">\n        <Header />\n        {loading ? <Loading /> : (\n          <div className='total-search'>\n            <div className='search-fields'>\n              <Input\n                testeid=\"search-artist-input\"\n                type=\"text\"\n                name=\"name\"\n                value={ name }\n                onChange={ this.handleChange }\n              />\n              <Button\n                testeidB=\"search-artist-button\"\n                nameButton=\"Pesquisar\"\n                isDisabled={ isSearchButtonDisabled }\n                ButtonClick={ this.buttonSearch }\n              />\n            </div>\n            <div className='search-results'>\n              <h2>\n                {`Resultado de álbuns de:  ${artNameState}`}\n              </h2>\n              <div className='album-list'>\n                {!artists.length ? <p>Nenhum álbum foi encontrado</p>\n                  : artists.map((artist) => (\n                    <div className='album-cart' key={ artist.collectionId }>\n                      <Link className='link-cart'\n                        data-testid={ `link-to-album-${artist.collectionId}` }\n                        to={ `/album/${artist.collectionId}` }\n                      >\n                        <img src={ artist.artworkUrl100 } alt={ artist.artistName } />\n                        <h2>{artist.collectionName}</h2>\n                        <p>{artist.artistName}</p>\n                      </Link>\n                    </div>))}\n              </div>\n            </div>\n          </div>)}\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}