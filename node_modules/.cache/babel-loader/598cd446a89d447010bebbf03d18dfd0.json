{"ast":null,"code":"var _jsxFileName = \"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/Album.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport MusicCard from '../components/MusicCard';\nimport getMusics from '../services/musicsAPI';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport './album.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Album extends Component {\n  constructor() {\n    super();\n\n    this.getMusicAPI = async () => {\n      const {\n        match: {\n          params\n        }\n      } = this.props;\n      const albumSearchFull = await getMusics(params.id);\n      const albumSearch = albumSearchFull.slice(1);\n      this.setState({\n        album: albumSearch,\n        albumInfo: albumSearchFull[0],\n        loading: false\n      });\n    };\n\n    this.handleCheckbox = async ({\n      target\n    }) => {\n      this.setState({\n        loading: true\n      }, async () => {\n        const {\n          album\n        } = this.state;\n        const objMusic = album.find(music => Number(target.id) === Number(music.trackId));\n\n        if (target.checked) {\n          await addSong(objMusic);\n          this.setState(() => ({\n            loading: false\n          }));\n        } else {\n          await removeSong(objMusic);\n          this.setState(() => ({\n            loading: false\n          }));\n        }\n\n        await this.handleSavedList();\n      });\n    };\n\n    this.musicIsFavorite = trackIdParam => {\n      const {\n        favoriteList\n      } = this.state;\n      const favMusicOk = favoriteList.some(favMusic => favMusic.trackId === trackIdParam);\n      return favMusicOk;\n    };\n\n    this.handleSavedList = async () => {\n      this.setState({\n        loading: true\n      }, async () => {\n        const savedList = await getFavoriteSongs();\n        this.setState({\n          loading: false,\n          favoriteList: savedList\n        });\n      });\n    };\n\n    this.state = {\n      album: [],\n      albumInfo: {},\n      loading: true,\n      favoriteList: []\n    };\n  }\n\n  componentDidMount() {\n    this.getMusicAPI();\n    this.handleSavedList();\n  }\n\n  render() {\n    const {\n      loading,\n      album,\n      albumInfo\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-album\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-album\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: albumInfo.artworkUrl100,\n            alt: albumInfo.collectionName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            \"data-testid\": \"album-name\",\n            children: albumInfo.collectionName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            \"data-testid\": \"artist-name\",\n            children: albumInfo.artistName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: album.map(music => /*#__PURE__*/_jsxDEV(MusicCard, {\n            music: music,\n            funcFavSong: this.handleCheckbox,\n            checkIsFav: this.musicIsFavorite(music.trackId)\n          }, music.trackId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 38\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nAlbum.propTypes = {\n  id: PropTypes.string.isRequired,\n  match: PropTypes.objectOf(PropTypes.object).isRequired,\n  params: PropTypes.objectOf(PropTypes.object).isRequired\n};\nexport default Album;","map":{"version":3,"sources":["/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/Album.jsx"],"names":["React","Component","PropTypes","Header","Loading","MusicCard","getMusics","addSong","getFavoriteSongs","removeSong","Album","constructor","getMusicAPI","match","params","props","albumSearchFull","id","albumSearch","slice","setState","album","albumInfo","loading","handleCheckbox","target","state","objMusic","find","music","Number","trackId","checked","handleSavedList","musicIsFavorite","trackIdParam","favoriteList","favMusicOk","some","favMusic","savedList","componentDidMount","render","artworkUrl100","collectionName","artistName","map","propTypes","string","isRequired","objectOf","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport MusicCard from '../components/MusicCard';\nimport getMusics from '../services/musicsAPI';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport './album.css';\n\nclass Album extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      album: [],\n      albumInfo: {},\n      loading: true,\n      favoriteList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getMusicAPI();\n    this.handleSavedList();\n  }\n\n  getMusicAPI = async () => {\n    const { match: { params } } = this.props;\n    const albumSearchFull = await getMusics(params.id);\n    const albumSearch = albumSearchFull.slice(1);\n    this.setState({\n      album: albumSearch,\n      albumInfo: albumSearchFull[0],\n      loading: false,\n    });\n  };\n\n  handleCheckbox = async ({ target }) => {\n    this.setState(\n      { loading: true },\n      async () => {\n        const { album } = this.state;\n        const objMusic = album\n          .find((music) => Number(target.id) === Number(music.trackId));\n        if (target.checked) {\n          await addSong(objMusic);\n          this.setState(() => ({\n            loading: false,\n          }));\n        } else {\n          await removeSong(objMusic);\n          this.setState(() => ({\n            loading: false,\n          }));\n        }\n        await this.handleSavedList();\n      },\n    );\n  }\n\n  musicIsFavorite = (trackIdParam) => {\n    const { favoriteList } = this.state;\n    const favMusicOk = favoriteList.some((favMusic) => favMusic.trackId === trackIdParam);\n    return favMusicOk;\n  }\n\n  handleSavedList = async () => {\n    this.setState(\n      { loading: true },\n      async () => {\n        const savedList = await getFavoriteSongs();\n        this.setState(({\n          loading: false,\n          favoriteList: savedList,\n        }));\n      },\n    );\n  }\n\n  render() {\n    const { loading, album, albumInfo } = this.state;\n    return (\n      <div data-testid=\"page-album\">\n        <Header />\n        {loading ? <Loading /> : (\n          <div className='main-album'>\n            <div>\n              <img src={ albumInfo.artworkUrl100 } alt={ albumInfo.collectionName } />\n              <h1 data-testid=\"album-name\">{albumInfo.collectionName}</h1>\n              <h3 data-testid=\"artist-name\">{albumInfo.artistName}</h3>\n            </div>\n            <div>\n              {album.map((music) => (<MusicCard\n                key={ music.trackId }\n                music={ music }\n                funcFavSong={ this.handleCheckbox }\n                checkIsFav={ this.musicIsFavorite(music.trackId) }\n              />))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nAlbum.propTypes = {\n  id: PropTypes.string.isRequired,\n  match: PropTypes.objectOf(PropTypes.object).isRequired,\n  params: PropTypes.objectOf(PropTypes.object).isRequired,\n};\n\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}