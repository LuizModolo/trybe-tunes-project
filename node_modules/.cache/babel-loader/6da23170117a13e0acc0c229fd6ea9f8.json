{"ast":null,"code":"import _objectSpread from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import Form from'../components/Form';import{createUser}from'../services/userAPI';import Loading from'../components/Loading';import'./login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.fetchAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var name;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();name=_this.state.name;_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createUser({name:name});case 2:login=_context.sent;if(login==='OK'){_this.setState({loading:false,redirectLogin:true});}case 4:case\"end\":return _context.stop();}}},_callee);})));case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleChange=function(_ref3){var target=_ref3.target;var name=target.name;var value=target.type==='checkbox'?target.checked:target.value;_this.setState(_defineProperty({},name,value),_this.handleLogin);};_this.handleLogin=function(){var name=_this.state.name;var minCaracterLogin=2;if(name.length>minCaracterLogin){_this.setState({isLoginButtonDisabled:false});}else{_this.setState({isLoginButtonDisabled:true});}};_this.state={loading:false,name:'',isLoginButtonDisabled:true,redirectLogin:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,loading=_this$state.loading,redirectLogin=_this$state.redirectLogin;if(redirectLogin){return/*#__PURE__*/_jsx(Redirect,{to:\"/search\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"login\",\"data-testid\":\"page-login\",children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"logotunes\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/LOGO_POSITIVA 1.png\",alt:\"trybetuneslogo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-login\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/3071357.jpg\",alt:\"login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-login\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Nome do usu\\xE1rio:\"}),/*#__PURE__*/_jsx(Form,_objectSpread(_objectSpread({},this.state),{},{onInputChange:this.handleChange,loginButtonClick:this.fetchAPI}))]})]})]})});}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/Login.jsx"],"names":["React","Component","Redirect","Form","createUser","Loading","Login","fetchAPI","event","preventDefault","name","state","setState","loading","login","redirectLogin","handleChange","target","value","type","checked","handleLogin","minCaracterLogin","length","isLoginButtonDisabled"],"mappings":"syCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAO,aAAP,C,2FAEMC,CAAAA,K,8FACJ,gBAAc,uCACZ,wBADY,MAWdC,QAXc,0FAWH,kBAAOC,KAAP,+HACTA,KAAK,CAACC,cAAN,GACQC,IAFC,CAEQ,MAAKC,KAFb,CAEDD,IAFC,CAGT,MAAKE,QAAL,CACE,CAAEC,OAAO,CAAE,IAAX,CADF,sEAEE,mKACsBT,CAAAA,UAAU,CAAC,CAAEM,IAAI,CAAJA,IAAF,CAAD,CADhC,QACQI,KADR,eAEE,GAAIA,KAAK,GAAK,IAAd,CAAoB,CAClB,MAAKF,QAAL,CAAc,CACZC,OAAO,CAAE,KADG,CAEZE,aAAa,CAAE,IAFH,CAAd,EAID,CAPH,sDAFF,IAHS,wDAXG,qEAuCdC,YAvCc,CAuCC,eAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,CAC7B,GAAQP,CAAAA,IAAR,CAAiBO,MAAjB,CAAQP,IAAR,CACA,GAAMQ,CAAAA,KAAK,CAAGD,MAAM,CAACE,IAAP,GAAgB,UAAhB,CAA6BF,MAAM,CAACG,OAApC,CAA8CH,MAAM,CAACC,KAAnE,CACA,MAAKN,QAAL,oBACGF,IADH,CACUQ,KADV,EAEG,MAAKG,WAFR,EAGD,CA7Ca,OA+CdA,WA/Cc,CA+CA,UAAM,CAClB,GAAQX,CAAAA,IAAR,CAAiB,MAAKC,KAAtB,CAAQD,IAAR,CACA,GAAMY,CAAAA,gBAAgB,CAAG,CAAzB,CACA,GAAIZ,IAAI,CAACa,MAAL,CAAcD,gBAAlB,CAAoC,CAClC,MAAKV,QAAL,CAAc,CAAEY,qBAAqB,CAAE,KAAzB,CAAd,EACD,CAFD,IAEO,CACL,MAAKZ,QAAL,CAAc,CAAEY,qBAAqB,CAAE,IAAzB,CAAd,EACD,CACF,CAvDa,CAGZ,MAAKb,KAAL,CAAa,CACXE,OAAO,CAAE,KADE,CAEXH,IAAI,CAAE,EAFK,CAGXc,qBAAqB,CAAE,IAHZ,CAIXT,aAAa,CAAE,KAJJ,CAAb,CAHY,aASb,C,wCAgDD,iBAAS,CACP,gBAAmC,KAAKJ,KAAxC,CAAQE,OAAR,aAAQA,OAAR,CAAiBE,aAAjB,aAAiBA,aAAjB,CACA,GAAIA,aAAJ,CAAmB,CACjB,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAAP,CACD,CACD,mBACE,YAAK,SAAS,CAAC,OAAf,CAAuB,cAAY,YAAnC,UACGF,OAAO,cAAG,KAAC,OAAD,IAAH,cAEJ,oCACE,YAAK,SAAS,CAAC,WAAf,uBACE,YAAK,GAAG,CAAC,sBAAT,CAAgC,GAAG,CAAC,gBAApC,EADF,EADF,cAIE,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,SAAS,CAAC,aAAf,uBACE,YAAK,GAAG,CAAC,cAAT,CAAwB,GAAG,CAAC,OAA5B,EADF,EADF,cAIE,aAAK,SAAS,CAAC,YAAf,wBACE,2CADF,cAEE,KAAC,IAAD,gCACK,KAAKF,KADV,MAEA,aAAa,CAAG,KAAKK,YAFrB,CAGA,gBAAgB,CAAG,KAAKT,QAHxB,GAFF,GAJF,GAJF,GAHN,EADF,CAyBD,C,mBAxFiBN,S,EA2FpB,cAAeK,CAAAA,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Form from '../components/Form';\nimport { createUser } from '../services/userAPI';\nimport Loading from '../components/Loading';\nimport './login.css';\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      name: '',\n      isLoginButtonDisabled: true,\n      redirectLogin: false,\n    };\n  }\n\n  fetchAPI = async (event) => {\n    event.preventDefault();\n    const { name } = this.state;\n    this.setState(\n      { loading: true },\n      async () => {\n        const login = await createUser({ name });\n        if (login === 'OK') {\n          this.setState({\n            loading: false,\n            redirectLogin: true,\n          });\n        }\n      },\n    );\n  }\n\n  //  fetchAPI = async (event) => {\n  //    event.preventDefault();\n  //    const { checkLoginInput } = this.state;\n  //    this.setState({ loading: true },\n  //      () => createUser({ name: checkLoginInput })\n  //        .then(() => this.setState({\n  //          loading: false,\n  //          redirectLogin: true,\n  //        })));\n  //  }\n\n  handleChange = ({ target }) => {\n    const { name } = target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    this.setState({\n      [name]: value,\n    }, this.handleLogin);\n  };\n\n  handleLogin = () => {\n    const { name } = this.state;\n    const minCaracterLogin = 2;\n    if (name.length > minCaracterLogin) {\n      this.setState({ isLoginButtonDisabled: false });\n    } else {\n      this.setState({ isLoginButtonDisabled: true });\n    }\n  }\n\n  render() {\n    const { loading, redirectLogin } = this.state;\n    if (redirectLogin) {\n      return <Redirect to=\"/search\" />;\n    }\n    return (\n      <div className=\"login\" data-testid=\"page-login\">\n        {loading ? <Loading />\n          : (\n            <div>\n              <div className='logotunes'>\n                <img src='/LOGO_POSITIVA 1.png' alt='trybetuneslogo' />\n              </div>\n              <div className=\"total-login\">\n                <div className=\"image-login\">\n                  <img src='/3071357.jpg' alt='login' />\n                </div>\n                <div className=\"form-login\">\n                  <h2>Nome do usu√°rio:</h2>\n                  <Form\n                  { ...this.state }\n                  onInputChange={ this.handleChange }\n                  loginButtonClick={ this.fetchAPI }\n                  />\n                </div>\n              </div>\n            </div>\n            )}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}