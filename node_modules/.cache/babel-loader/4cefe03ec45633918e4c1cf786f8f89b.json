{"ast":null,"code":"import _regeneratorRuntime from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Header from'../components/Header';import Loading from'../components/Loading';import MusicCard from'../components/MusicCard';import{addSong,getFavoriteSongs,removeSong}from'../services/favoriteSongsAPI';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Favorites=/*#__PURE__*/function(_Component){_inherits(Favorites,_Component);var _super=_createSuper(Favorites);function Favorites(){var _this;_classCallCheck(this,Favorites);_this=_super.call(this);_this.handleCheckbox=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref){var target;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:target=_ref.target;_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var favoriteList,objMusic;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:favoriteList=_this.state.favoriteList;objMusic=favoriteList.find(function(music){return Number(target.id)===Number(music.trackId);});if(!target.checked){_context.next=8;break;}_context.next=5;return addSong(objMusic);case 5:_this.setState(function(){return{loading:false};});_context.next=11;break;case 8:_context.next=10;return removeSong(objMusic);case 10:_this.setState(function(){return{loading:false};});case 11:_context.next=13;return _this.handleSavedList();case 13:case\"end\":return _context.stop();}}},_callee);})));case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.musicIsFavorite=function(trackIdParam){var favoriteList=_this.state.favoriteList;var favMusicOk=favoriteList.some(function(favMusic){return favMusic.trackId===trackIdParam;});return favMusicOk;};_this.handleSavedList=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var savedList;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getFavoriteSongs();case 2:savedList=_context3.sent;_this.setState({loading:false,favoriteList:savedList});case 4:case\"end\":return _context3.stop();}}},_callee3);})));case 1:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={loading:false,favoriteList:[]};return _this;}_createClass(Favorites,[{key:\"componentDidMount\",value:function componentDidMount(){this.handleSavedList();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,favoriteList=_this$state.favoriteList;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-favorites\",children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"favorits-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"M\\xFAsicas Favoritas\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-album\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"album-cart2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.mensagenscomamor.com/content/images/m000513979.jpg?v=1&w=564&h=564\",alt:\"minha-playlist\"}),/*#__PURE__*/_jsx(\"h1\",{\"data-testid\":\"album-name\",children:\"My Playlist\"}),/*#__PURE__*/_jsx(\"h3\",{\"data-testid\":\"artist-name\",children:\"Minhas m\\xFAsicas favoritas!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"music-album-list\",children:favoriteList.map(function(music){return/*#__PURE__*/_jsx(MusicCard,{music:music,funcFavSong:_this2.handleCheckbox,checkIsFav:_this2.musicIsFavorite(music.trackId)},music.trackId);})})]})]})]});}}]);return Favorites;}(Component);export default Favorites;","map":{"version":3,"sources":["/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/Favorites.jsx"],"names":["React","Component","Header","Loading","MusicCard","addSong","getFavoriteSongs","removeSong","Favorites","handleCheckbox","target","setState","loading","favoriteList","state","objMusic","find","music","Number","id","trackId","checked","handleSavedList","musicIsFavorite","trackIdParam","favMusicOk","some","favMusic","savedList","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport MusicCard from '../components/MusicCard';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nclass Favorites extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      favoriteList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.handleSavedList();\n  }\n\n  handleCheckbox = async ({ target }) => {\n    this.setState(\n      { loading: true },\n      async () => {\n        const { favoriteList } = this.state;\n        const objMusic = favoriteList\n          .find((music) => Number(target.id) === Number(music.trackId));\n        if (target.checked) {\n          await addSong(objMusic);\n          this.setState(() => ({\n            loading: false,\n          }));\n        } else {\n          await removeSong(objMusic);\n          this.setState(() => ({\n            loading: false,\n          }));\n        }\n        await this.handleSavedList();\n      },\n    );\n  }\n\n  musicIsFavorite = (trackIdParam) => {\n    const { favoriteList } = this.state;\n    const favMusicOk = favoriteList.some((favMusic) => favMusic.trackId === trackIdParam);\n    return favMusicOk;\n  }\n\n  handleSavedList = async () => {\n    this.setState(\n      { loading: true },\n      async () => {\n        const savedList = await getFavoriteSongs();\n        this.setState(({\n          loading: false,\n          favoriteList: savedList,\n        }));\n      },\n    );\n  }\n\n  render() {\n    const { loading, favoriteList } = this.state;\n    return (\n      <div data-testid=\"page-favorites\">\n        <Header />\n        {loading ? <Loading /> : (\n          <div className='favorits-list'>\n            <h2>Músicas Favoritas</h2>\n            <div className='main-album'>\n              <div className='album-cart2'>\n                <img src='https://cdn.mensagenscomamor.com/content/images/m000513979.jpg?v=1&w=564&h=564' alt='minha-playlist' />\n                <h1 data-testid=\"album-name\">My Playlist</h1>\n                <h3 data-testid=\"artist-name\">Minhas músicas favoritas!</h3>\n              </div>\n              <div className='music-album-list'>\n                {favoriteList.map((music) => (<MusicCard\n                  key={ music.trackId }\n                  music={ music }\n                  funcFavSong={ this.handleCheckbox }\n                  checkIsFav={ this.musicIsFavorite(music.trackId) }\n                />))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Favorites;\n"]},"metadata":{},"sourceType":"module"}