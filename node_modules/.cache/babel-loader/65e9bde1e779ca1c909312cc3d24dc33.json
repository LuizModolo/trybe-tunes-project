{"ast":null,"code":"import _defineProperty from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/luizmodolo/trybe/projetos_web/trybe-tunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import Header from'../components/Header';import FormProfile from'../components/FormProfile';import{getUser,updateUser}from'../services/userAPI';import Loading from'../components/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileEdit=/*#__PURE__*/function(_Component){_inherits(ProfileEdit,_Component);var _super=_createSuper(ProfileEdit);function ProfileEdit(){var _this;_classCallCheck(this,ProfileEdit);_this=_super.call(this);_this.getProfileInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUser();case 2:userName=_context.sent;_this.setState(_objectSpread(_objectSpread({},userName),{},{loading:false}));case 4:case\"end\":return _context.stop();}}},_callee);})));case 1:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleChange=function(_ref3){var target=_ref3.target;var name=target.name,value=target.value;_this.setState(_defineProperty({},name,value));};_this.validateFields=function(){var _this$state=_this.state,name=_this$state.name,email=_this$state.email,description=_this$state.description,image=_this$state.image;if(name!==''&&email!==''&&description!==''&&image!==''){return false;}return true;};_this.saveProfileInfo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _this$state2,name,email,description,image;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_this$state2=_this.state,name=_this$state2.name,email=_this$state2.email,description=_this$state2.description,image=_this$state2.image;_this.setState({loading:true},/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var userInfo;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return updateUser({name:name,email:email,description:description,image:image});case 2:userInfo=_context3.sent;_this.setState(_objectSpread(_objectSpread({},userInfo),{},{isSaved:true,loading:false}));case 4:case\"end\":return _context3.stop();}}},_callee3);})));case 2:case\"end\":return _context4.stop();}}},_callee4);}));_this.state={loading:false,name:'',email:'',description:'',image:'',isSaved:false};return _this;}_createClass(ProfileEdit,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProfileInfo();}},{key:\"render\",value:function render(){var _this$state3=this.state,loading=_this$state3.loading,isSaved=_this$state3.isSaved;if(isSaved){return/*#__PURE__*/_jsx(Redirect,{to:\"/profile\"});}return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-profile-edit\",children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(FormProfile,_objectSpread(_objectSpread({},this.state),{},{isButtonDisabled:this.validateFields(),saveFunc:this.saveProfileInfo,handleChange:this.handleChange}))]});}}]);return ProfileEdit;}(Component);export default ProfileEdit;","map":{"version":3,"sources":["/Users/luizmodolo/trybe/projetos_web/trybe-tunes/src/pages/ProfileEdit.jsx"],"names":["React","Component","Redirect","Header","FormProfile","getUser","updateUser","Loading","ProfileEdit","getProfileInfo","setState","loading","userName","handleChange","target","name","value","validateFields","state","email","description","image","saveProfileInfo","userInfo","isSaved"],"mappings":"syCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,qBAApC,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,2FAEMC,CAAAA,W,0GACJ,sBAAc,6CACZ,wBADY,MAiBdC,cAjBc,sEAiBG,wIACf,MAAKC,QAAL,CACE,CAAEC,OAAO,CAAE,IAAX,CADF,sEAEE,sKACyBN,CAAAA,OAAO,EADhC,QACQO,QADR,eAEE,MAAKF,QAAL,gCACKE,QADL,MAEED,OAAO,CAAE,KAFX,IAFF,sDAFF,IADe,wDAjBH,SA8BdE,YA9Bc,CA8BC,eAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,CAC7B,GAAQC,CAAAA,IAAR,CAAwBD,MAAxB,CAAQC,IAAR,CAAcC,KAAd,CAAwBF,MAAxB,CAAcE,KAAd,CACA,MAAKN,QAAL,oBACGK,IADH,CACUC,KADV,GAGD,CAnCa,OAqCdC,cArCc,CAqCG,UAAM,CACrB,gBAA4C,MAAKC,KAAjD,CAAQH,IAAR,aAAQA,IAAR,CAAcI,KAAd,aAAcA,KAAd,CAAqBC,WAArB,aAAqBA,WAArB,CAAkCC,KAAlC,aAAkCA,KAAlC,CACA,GAAIN,IAAI,GAAK,EAAT,EAAeI,KAAK,GAAK,EAAzB,EAA+BC,WAAW,GAAK,EAA/C,EAAqDC,KAAK,GAAK,EAAnE,CAAuE,CACrE,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CACD,CA3Ca,OA6CdC,eA7Cc,sEA6CI,mMAC4B,MAAKJ,KADjC,CACRH,IADQ,cACRA,IADQ,CACFI,KADE,cACFA,KADE,CACKC,WADL,cACKA,WADL,CACkBC,KADlB,cACkBA,KADlB,CAEhB,MAAKX,QAAL,CACE,CAAEC,OAAO,CAAE,IAAX,CADF,sEAEE,4KACyBL,CAAAA,UAAU,CAAC,CAAES,IAAI,CAAJA,IAAF,CAAQI,KAAK,CAALA,KAAR,CAAeC,WAAW,CAAXA,WAAf,CAA4BC,KAAK,CAALA,KAA5B,CAAD,CADnC,QACQE,QADR,gBAEE,MAAKb,QAAL,gCACKa,QADL,MAEEC,OAAO,CAAE,IAFX,CAGEb,OAAO,CAAE,KAHX,IAFF,wDAFF,IAFgB,wDA7CJ,GAGZ,MAAKO,KAAL,CAAa,CACXP,OAAO,CAAE,KADE,CAEXI,IAAI,CAAE,EAFK,CAGXI,KAAK,CAAE,EAHI,CAIXC,WAAW,CAAE,EAJF,CAKXC,KAAK,CAAE,EALI,CAMXG,OAAO,CAAE,KANE,CAAb,CAHY,aAWb,C,yDAED,4BAAoB,CAClB,KAAKf,cAAL,GACD,C,sBA6CD,iBAAS,CACP,iBAA6B,KAAKS,KAAlC,CAAQP,OAAR,cAAQA,OAAR,CAAiBa,OAAjB,cAAiBA,OAAjB,CACA,GAAIA,OAAJ,CAAa,CACX,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,UAAb,EAAP,CACD,CACD,mBACE,aAAK,cAAY,mBAAjB,wBACE,KAAC,MAAD,IADF,CAEGb,OAAO,cAAG,KAAC,OAAD,IAAH,cACN,KAAC,WAAD,gCACO,KAAKO,KADZ,MAEE,gBAAgB,CAAG,KAAKD,cAAL,EAFrB,CAGE,QAAQ,CAAG,KAAKK,eAHlB,CAIE,YAAY,CAAG,KAAKT,YAJtB,GAHJ,GADF,CAYD,C,yBA9EuBZ,S,EAiF1B,cAAeO,CAAAA,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport FormProfile from '../components/FormProfile';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from '../components/Loading';\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      loading: false,\n      name: '',\n      email: '',\n      description: '',\n      image: '',\n      isSaved: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getProfileInfo();\n  }\n\n  getProfileInfo = async () => {\n    this.setState(\n      { loading: true },\n      async () => {\n        const userName = await getUser();\n        this.setState({\n          ...userName,\n          loading: false,\n        });\n      },\n    );\n  }\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  validateFields = () => {\n    const { name, email, description, image } = this.state;\n    if (name !== '' && email !== '' && description !== '' && image !== '') {\n      return false;\n    }\n    return true;\n  }\n\n  saveProfileInfo = async () => {\n    const { name, email, description, image } = this.state;\n    this.setState(\n      { loading: true },\n      async () => {\n        const userInfo = await updateUser({ name, email, description, image });\n        this.setState({\n          ...userInfo,\n          isSaved: true,\n          loading: false,\n        });\n      },\n    );\n  }\n\n  render() {\n    const { loading, isSaved } = this.state;\n    if (isSaved) {\n      return <Redirect to=\"/profile\" />;\n    }\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <Header />\n        {loading ? <Loading /> : (\n          <FormProfile\n            { ...this.state }\n            isButtonDisabled={ this.validateFields() }\n            saveFunc={ this.saveProfileInfo }\n            handleChange={ this.handleChange }\n          />)}\n      </div>\n    );\n  }\n}\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}